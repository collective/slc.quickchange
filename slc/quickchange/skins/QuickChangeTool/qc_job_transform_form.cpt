<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<head>
  <metal:ajax fill-slot="javascript_head_slot">
    <script src="/prototype.js" type="text/javascript"></script>
    <script src="/scriptaculous.js" type="text/javascript"></script>
    
    <script type="text/javascript"
            tal:attributes="src string:$portal_url/qc_javascripts.js"></script>

  </metal:ajax>
      
  <metal:css fill-slot="css_slot">
    <style type="text/css" media="all" 
               tal:content="string:@import url($portal_url/qc_styledefs.css);"></style> 
  </metal:css>    
</head>
    
<body>

<div metal:fill-slot="main">
    

<h1>Select transforms</h1>

  <fieldset>
    <legend i18n:translate="legend_available_transforms">Available Transforms</legend>
   
    <div id="dragarea">
        <h3>Available Transforms</h3>
        <div id="available-transforms">
            <ul id="available-transforms-list">
                <span tal:repeat="t here/listAvailableTransforms" tal:omit-tag="">
                    <li class="transform"
                        tal:content="structure python:t[1]" 
                        tal:attributes="id python:'transform_'+t[0]">
                    </li>
                    <script type="text/javascript" tal:content="python:'new Draggable(\'transform_'+t[0]+'\', {revert:true})'"></script>
                </span>                
            </ul>
        </div>
    </div>
    
    <div id="droparea">
        <h3>Selected Transforms</h3>
        <div id="selected-transforms">
            <ul id="selected-transforms-list">
            </ul>
        </div>
    </div>
    
    <div id="controls">
        <h3>&nbsp;</h3>
        <div id="wastebin">
            <img src="/trash.gif"><br>
            Drop items here to remove them from the cart.
        </div>    
        <p id="indicator">
          <img alt="Indicator" src="/indicator_web20_working.gif" /><br>
          Updating ...
        </p>
    </div>
    
    
    <div style="clear:both;"></div>
    
    <script type="text/javascript">Droppables.add('selected-transforms-list', 
        {accept:'transform', 
         onDrop:AddTransforms, 
         hoverclass:'selected-transforms-active'}
       )
    </script>
          
    <script type="text/javascript">Droppables.add('wastebin', 
        {accept:'selected-transform', 
         onDrop:RemoveTransforms,
         hoverclass:'wastebin-active'}
       )
    </script>
     
    
  </fieldset>

  
  <fieldset>
  
    <legend><span i18n:translate="legend_configure_transforms">Configure Transforms</span></legend>
    
    <div id="transform-configlets">
        <div metal:use-macro="here/transform_configure_template/macros/transform-config"></div>    
    </div>    

  </fieldset>

  <script language="JavaScript">initQCTransforms(); </script>


</div>

</body>
</html>
